<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高齡者健康教案資料庫</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .modal-active { overflow: hidden; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">

    <!-- Header -->
    <header class="bg-white border-b sticky top-0 z-30 shadow-sm">
        <div class="max-w-6xl mx-auto px-4 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4">
            <div class="flex items-center gap-2">
                <div class="bg-indigo-600 p-2 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="text-white w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                </div>
                <h1 class="text-xl font-bold text-gray-800 tracking-tight">高齡者教案資料庫總覽</h1>
            </div>
            
            <div class="relative flex-1 max-w-md">
                <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                </span>
                <input
                    type="text"
                    id="searchInput"
                    placeholder="搜尋教案名稱或關鍵字..."
                    class="w-full pl-10 pr-4 py-2 bg-gray-100 border-none rounded-full focus:ring-2 focus:ring-indigo-500 transition-all outline-none"
                />
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-8">
        
        <!-- Welcome Cards -->
        <div class="mb-8 grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-gradient-to-br from-indigo-500 to-blue-600 p-6 rounded-2xl text-white shadow-md">
                <svg xmlns="http://www.w3.org/2000/svg" class="mb-2 opacity-80" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
                <div class="text-2xl font-bold" id="totalCount">5</div>
                <div class="text-indigo-100">已收錄教案總數</div>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                <svg xmlns="http://www.w3.org/2000/svg" class="mb-2 text-purple-500" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
                <div class="text-2xl font-bold text-gray-800">3</div>
                <div class="text-gray-500">核心課程類別</div>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center justify-center">
                <p class="text-gray-500 text-sm italic text-center">點擊教案卡片即可觀看影片<br>與教學詳細說明</p>
            </div>
        </div>

        <!-- Filters -->
        <div class="flex flex-wrap items-center gap-2 mb-8" id="filterContainer">
            <span class="text-gray-400 mr-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg>
            </span>
            <button onclick="filterByCategory('全部')" class="filter-btn active px-4 py-2 rounded-full text-sm font-medium transition-all bg-indigo-600 text-white shadow-md">全部</button>
            <button onclick="filterByCategory('口腔健康')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-white text-gray-600 hover:bg-gray-100 border border-gray-200">口腔健康</button>
            <button onclick="filterByCategory('體能鍛煉')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-white text-gray-600 hover:bg-gray-100 border border-gray-200">體能鍛煉</button>
            <button onclick="filterByCategory('文化與舞蹈')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-white text-gray-600 hover:bg-gray-100 border border-gray-200">文化與舞蹈</button>
        </div>

        <!-- Results Grid -->
        <div id="lessonGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Cards will be injected here by JS -->
        </div>

        <!-- Empty State -->
        <div id="emptyState" class="hidden py-20 text-center">
            <div class="bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="text-gray-400" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
            </div>
            <h3 class="text-lg font-medium text-gray-800">找不到相關教案</h3>
            <p class="text-gray-500">嘗試調整搜尋關鍵字或分類</p>
        </div>
    </main>

    <!-- Video Modal -->
    <div id="videoModal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeModal()"></div>
        <div class="bg-white w-full max-w-4xl rounded-3xl overflow-hidden shadow-2xl relative z-10">
            <button onclick="closeModal()" class="absolute top-4 right-4 z-20 bg-black/20 hover:bg-black/40 text-white p-2 rounded-full transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
            </button>
            
            <div class="flex flex-col md:flex-row h-full max-h-[90vh]">
                <!-- Video Player Container -->
                <div class="w-full md:w-2/3 bg-black aspect-video md:aspect-auto flex items-center">
                    <iframe id="modalIframe" src="" class="w-full h-full border-none" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>

                <!-- Info Sidebar -->
                <div class="w-full md:w-1/3 p-6 overflow-y-auto bg-white">
                    <div class="mb-4">
                        <span id="modalCategory" class="px-2 py-1 rounded-full text-xs font-medium border"></span>
                        <h2 id="modalTitle" class="text-2xl font-bold mt-2 text-gray-800"></h2>
                        <p id="modalDuration" class="text-sm text-gray-500 mt-1"></p>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <h4 class="font-bold text-gray-700 mb-1 border-l-4 border-indigo-500 pl-2">教學重點</h4>
                            <p id="modalDescription" class="text-gray-600 text-sm leading-relaxed"></p>
                        </div>
                        
                        <div>
                            <h4 class="font-bold text-gray-700 mb-2 border-l-4 border-indigo-500 pl-2">相關標籤</h4>
                            <div id="modalTags" class="flex flex-wrap gap-2"></div>
                        </div>

                        <div class="pt-6 border-t border-gray-100 flex flex-col gap-3">
                            <a id="modalYoutubeLink" href="#" target="_blank" class="flex items-center justify-center gap-2 w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition-all">
                                在 YouTube 開啟 
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h6v6"/><path d="M10 14 21 3"/><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/></svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white border-t py-12 mt-12">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p class="text-gray-400 text-sm">
                © 2024 高齡者健康教案資料庫系統 - 致力於推廣長者數位健康教育
            </p>
        </div>
    </footer>

    <script>
        const LESSON_PLANS = [
            {
                id: 1,
                title: "吞嚥健康操 (台語版)",
                videoId: "ZYgjKHwyA4g",
                category: "口腔健康",
                description: "專為高齡者設計的吞嚥訓練，使用親切的台語講解，預防吸入性肺炎與訓練口腔肌群。",
                tags: ["台語", "吞嚥訓練", "預防失智"],
                duration: "約 5 分鐘"
            },
            {
                id: 2,
                title: "益口銅身操",
                videoId: "qZ87nEuBR4E",
                category: "口腔健康",
                description: "結合口腔運動與肢體伸展的綜合性健康操，提升長者口腔機能及身體協調性。",
                tags: ["口腔衛生", "肌力訓練", "全身運動"],
                duration: "約 10 分鐘"
            },
            {
                id: 3,
                title: "五行健康操",
                videoId: "RKB4NxhENyY",
                category: "體能鍛煉",
                description: "經典的健康操，動作簡單易學，適合每天早晨進行全身性的氣血循環運動。",
                tags: ["氣血循環", "經典健康操", "每日運動"],
                duration: "約 8 分鐘"
            },
            {
                id: 4,
                title: "高齡者健康操",
                videoId: "_w50TfdCmKU",
                category: "體能鍛煉",
                description: "針對高齡者體力調整的運動，著重於關節靈活度與心肺功能的提升。",
                tags: ["低強度", "關節活動", "心肺訓練"],
                duration: "約 12 分鐘"
            },
            {
                id: 5,
                title: "那魯灣舞曲",
                videoId: "pCA8u2KrwTg",
                category: "文化與舞蹈",
                description: "結合原住民文化元素的舞蹈教學，透過節奏明快的舞曲提升長者的活動力與心情愉快。",
                tags: ["原住民", "舞蹈", "心情愉悅"],
                duration: "約 4 分鐘"
            }
        ];

        let currentCategory = '全部';
        let searchQuery = '';

        function getCategoryStyle(category) {
            const styles = {
                "口腔健康": "bg-blue-100 text-blue-700 border-blue-200",
                "體能鍛煉": "bg-green-100 text-green-700 border-green-200",
                "文化與舞蹈": "bg-purple-100 text-purple-700 border-purple-200"
            };
            return styles[category] || 'bg-gray-100 text-gray-700 border-gray-200';
        }

        function renderLessons() {
            const grid = document.getElementById('lessonGrid');
            const emptyState = document.getElementById('emptyState');
            
            const filtered = LESSON_PLANS.filter(plan => {
                const matchesSearch = plan.title.toLowerCase().includes(searchQuery.toLowerCase()) || 
                                     plan.description.toLowerCase().includes(searchQuery.toLowerCase());
                const matchesCategory = currentCategory === '全部' || plan.category === currentCategory;
                return matchesSearch && matchesCategory;
            });

            if (filtered.length === 0) {
                grid.classList.add('hidden');
                emptyState.classList.remove('hidden');
            } else {
                grid.classList.remove('hidden');
                emptyState.classList.add('hidden');
                
                grid.innerHTML = filtered.map(plan => `
                    <div class="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all border border-gray-100 group">
                        <div class="aspect-video bg-gray-200 relative cursor-pointer group-hover:opacity-90 transition-opacity" onclick="openModal(${plan.id})">
                            <img src="https://img.youtube.com/vi/${plan.videoId}/mqdefault.jpg" alt="${plan.title}" class="w-full h-full object-cover">
                            <div class="absolute inset-0 flex items-center justify-center">
                                <div class="bg-white/90 p-3 rounded-full shadow-lg group-hover:scale-110 transition-transform">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="text-indigo-600 fill-indigo-600 w-6 h-6" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                                </div>
                            </div>
                            <div class="absolute bottom-2 right-2 bg-black/70 text-white text-[10px] px-2 py-1 rounded">
                                ${plan.duration}
                            </div>
                        </div>
                        <div class="p-5">
                            <span class="px-2 py-1 rounded-full text-xs font-medium border ${getCategoryStyle(plan.category)}">${plan.category}</span>
                            <h3 class="text-lg font-bold text-gray-800 mt-2 mb-2 group-hover:text-indigo-600 transition-colors">${plan.title}</h3>
                            <p class="text-gray-500 text-sm mb-4 line-clamp-2">${plan.description}</p>
                            <div class="flex flex-wrap gap-1 mb-4">
                                ${plan.tags.map(tag => `<span class="text-[10px] px-2 py-0.5 bg-gray-100 text-gray-500 rounded">#${tag}</span>`).join('')}
                            </div>
                            <button onclick="openModal(${plan.id})" class="w-full py-2.5 bg-indigo-50 text-indigo-700 font-semibold rounded-xl hover:bg-indigo-100 transition-colors flex items-center justify-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/></svg>
                                查看詳細教案
                            </button>
                        </div>
                    </div>
                `).join('');
            }
            document.getElementById('totalCount').innerText = filtered.length;
        }

        function filterByCategory(cat) {
            currentCategory = cat;
            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(btn => {
                if (btn.innerText === cat) {
                    btn.classList.add('bg-indigo-600', 'text-white', 'shadow-md', 'active');
                    btn.classList.remove('bg-white', 'text-gray-600', 'hover:bg-gray-100', 'border-gray-200');
                } else {
                    btn.classList.remove('bg-indigo-600', 'text-white', 'shadow-md', 'active');
                    btn.classList.add('bg-white', 'text-gray-600', 'hover:bg-gray-100', 'border-gray-200');
                }
            });
            renderLessons();
        }

        function openModal(id) {
            const plan = LESSON_PLANS.find(p => p.id === id);
            if (!plan) return;

            const modal = document.getElementById('videoModal');
            document.getElementById('modalIframe').src = `https://www.youtube.com/embed/${plan.videoId}?autoplay=1`;
            document.getElementById('modalTitle').innerText = plan.title;
            document.getElementById('modalCategory').innerText = plan.category;
            document.getElementById('modalCategory').className = `px-2 py-1 rounded-full text-xs font-medium border ${getCategoryStyle(plan.category)}`;
            document.getElementById('modalDuration').innerText = `影片長度：${plan.duration}`;
            document.getElementById('modalDescription').innerText = plan.description;
            document.getElementById('modalYoutubeLink').href = `https://www.youtube.com/watch?v=${plan.videoId}`;
            
            const tagsContainer = document.getElementById('modalTags');
            tagsContainer.innerHTML = plan.tags.map(tag => `<span class="px-3 py-1 bg-gray-100 text-gray-700 text-xs rounded-full">${tag}</span>`).join('');

            modal.classList.remove('hidden');
            document.body.classList.add('modal-active');
        }

        function closeModal() {
            const modal = document.getElementById('videoModal');
            document.getElementById('modalIframe').src = "";
            modal.classList.add('hidden');
            document.body.classList.remove('modal-active');
        }

        // Search event listener
        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchQuery = e.target.value;
            renderLessons();
        });

        // Initialize
        window.onload = renderLessons;
    </script>
</body>
</html>
